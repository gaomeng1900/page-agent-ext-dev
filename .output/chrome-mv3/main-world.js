var mainWorld=(function(){"use strict";function c(n){return n==null||typeof n=="function"?{main:n}:n}const l=c(()=>{console.log("%c🌐 Page Agent Extension API","color: #9c27b0; font-weight: bold; font-size: 16px");const n="session_"+Math.random().toString(36).substring(2)+Date.now().toString(36);console.log("%c   Session ID: "+n,"color: #673ab7; font-weight: bold");function t(e,r){return new Promise((u,d)=>{const i=Math.random().toString(36);console.log(`%c➡️  [Page → Content] ${e}`,"color: #2196f3; font-weight: bold"),console.log(`%c   Message ID: ${i.substring(0,8)}... | Session: ${n.substring(0,12)}...`,"color: #999");const a=o=>{o.source===window&&o.data.type==="PAGE_AGENT_RESPONSE"&&o.data.messageId===i&&(window.removeEventListener("message",a),console.log("%c⬅️  [Content → Page] Response","color: #4caf50; font-weight: bold"),console.log(`%c   Success: ${o.data.success}`,"color: #999"),o.data.success?u(o.data.data):d(new Error(o.data.error)))};window.addEventListener("message",a),window.postMessage({type:"PAGE_AGENT_REQUEST",messageId:i,sessionId:n,action:e,payload:r},"*")})}window.pageAgentExtension={async link(e){if(!e||typeof e!="string")throw new Error("Key must be a non-empty string");const r=await t("LINK",{key:e});return console.log("✅ Page Agent Extension authenticated"),r},async listTabs(){return await t("GET_TABS")},async executeScript(e,r){if(typeof e!="number")throw new Error("tabId must be a number");if(typeof r!="string")throw new Error("script must be a string");return await t("EXECUTE_SCRIPT",{tabId:e,code:r})},async openTab(e){if(typeof e!="string")throw new Error("url must be a string");return await t("OPEN_TAB",{url:e})},async closeTab(e){if(typeof e!="number")throw new Error("tabId must be a number");return await t("CLOSE_TAB",{tabId:e})}},console.log("%c✅ API Ready","color: #4caf50; font-weight: bold; font-size: 14px"),console.log(`%c   • pageAgentExtension.link(key)
   • pageAgentExtension.listTabs()
   • pageAgentExtension.executeScript(tabId, script)
   • pageAgentExtension.openTab(url)
   • pageAgentExtension.closeTab(tabId)`,"color: #999; font-size: 12px")});function w(){}function s(n,...t){}const g={debug:(...n)=>s(console.debug,...n),log:(...n)=>s(console.log,...n),warn:(...n)=>s(console.warn,...n),error:(...n)=>s(console.error,...n)};return(async()=>{try{return await l.main()}catch(n){throw g.error('The unlisted script "main-world" crashed on startup!',n),n}})()})();
mainWorld;